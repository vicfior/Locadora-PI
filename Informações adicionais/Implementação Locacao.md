# Arquivo Locacao.c

Na tabela abaixo há uma breve descrição de cada função presente nos arquivos Locacao.c e Locacao.h

| Função | Tipo | Descrição |
|---|---|---|
|struct locacao| struct | Utilizada para descartar qualquer entrada de teclado pendente até que uma quebra de linha seja encontrada.|
|*locacao_cria() | Locacao |Representa uma lsita encadeada de locações, onde os ponteiros início e fim são inicializados como nulos, indicando que a lista está vazia no momento. Cria uma noa lista de clientes vazia.|
|inserir_locacao(Locacao **inicio, Locacao *nova_locacao)|void | Insere uma nova locação no final da lista encadeada. Recebe como parâmetros, inicio, um ponteior para o ponteior do início da lista e nova_locacao, um ponteiro para a nova locação que será inserida.| |
|locacao_libera(Locacao *locacao) | void | Libera a memória alocada para o nó de clientes. Possui um ponteiro cliente do tipo Cliente como parâmetro.|
|cliente_existe(char *codcliente)|int|Verifica se um cliente como código especificado pelo usuário existe no arquivo "Clientes.txt".Se encontrar o código, armazena os dados desse cliente nas variáveis temporárias e define clienteEcontrado como 1. Se não encontrar o cliente, ele pergunta se deseja cadastrar um novo client e chama a função cadastrar_cliente |
|filme_existe(char *codfilme) | int | Função que verifica se um filme existe ou não. Ela solicita o código do filme e busca o filme que corresponde a esse código no arquivo "Filmes.txt".|
|filme_disponivel(char *codfilme) | int |Função que verifica se um filme está disponível para locação. É feita uma busca pelo código do filme nos arquivos Locacao.txt e Rerservas.txt. Se o código estiver presente em quaisquer desses arquivos, a função retorna 1 e ele está indisponível para locação.|
|alugar_filme() | void | Função que permite alugar um filme. Essa função analisa se o filme e o cliente existem. Se existirem, ela verifica se o filme está disponível com a função filme_disponivel, e salva os dados de locação em um arquivo Locacao.txt, que possui código de locação, data de locação e data de devolução. Se o filme não estiver disponível, ela dá a opção de verificar se o filme está reservado e usa a função pesquisar_reserva() e se o filme estiver reservado, ela pergunta se a reserva foi feita a mais de 3 dias. Se sim, o filme fica liberado para locação. Se não, ele continua indisponível.|
|exibir_locacoes()| void | Esta função exibe todas a locações cadastradas no sistema.|
|pesquisar_locacao()| void |Utilizada para pesquisar qualquer locação com base no código da locação. Como resultado ela mostra o código de locação, código do cliente que alugou, código do filme alugado, data de locação e data de devolução.|
|aplicar_multa()| double |Função de aplicação de multa em caso de devolução do filme com atraso. Ela solicita o a quantidade de dias de atraso e, se a quantidade for igual a 1, apenas adiciona R$2,50 ao valor do pagamento normal de R$10,00. Se for maior de 1 dia, é adicionado os R$2,50 mais um acréscimo de R$0,50 por dia de atraso. Retorna o valor da multa.|
|receber_pagamento()|double|Função que recebe o pagamento no valor de R$10,00. Retorna o valor do pagamento.|
|devolver_filme(char *codlocacao)|void|Esta função é utilizada para fazer a devolução de um filme alugado. A função utiliza um código de locação fornecido pelo usuário e realiza uma busca de forma sequencial até encontrar o código. Após isso é solicitado que informe a data de devolução para saber se será necessário aplicar multa com a função aplicar_multa() ou apenas receber o pagamento com a função receber_pagamento(). Após isso, o código do cliente, código de locação, código do filme, data de devolução e o valor pago são salvos em um arquivo "Historico.txt" que é um histórico de locação dos filmes.|
|remover_locacao(char *codlocacao)|void|Função utilizada para remover a locação do arquivo "Locacao.txt" quando um filme foi devolvido. Para isso, é feita uma cópia de todos os dados em um arquivo temporário, menos os dados da locação a ser removida. Depois é o arquivo temporário é renomeado como "Locacao.txt".|
|pesquisar_historico()|void|Função que utiliza o código do cliente para fazer uma busca de forma sequencial no arquivo e retornar o histórico de filmes alugados pelo cliente do código pesquisado. Ela mostra todos os filmes que o cliente já alugou bem como os valores pagos em cada locação.|
|reservar_filme()|void|Esta função é utilizada quando é preciso reservar algum filme. Ela solicita o código do cliente, código do filme e a data da reserva e salva esses dados em um arquivo "Reservas.txt" e afirma que a reserva ficará ativa por 3 dias.|
|remover_reserva()|void|Remove uma reserva. A função solicita o código do filme reservado e grava os dados de todas as reservas em um arquivo temporário, menos a correspondente a esse código, posteriormente apaga o arquivo "Reservas.txt" e renomeia o arquivo temporário como "Reservas.txt" salvando as alterações feitas.|
|pesquisar_reserva()|int|Função que solicita o código do filme e faz uma busca em "Reservas.txt" e, caso o filme esteja reservado, retorna os dados da reserva.|
|exibir_reservas()|void|Exibe todas as reservas cadastradas no sistema.|

> [!NOTE]
> Para a implementação desse sistema de cadastro e gerenciamento das locações da locadora, foi utilizada lista encadeada e o armazenamento das informações em um arquivo do tipo texto para poder salvar definitivamente os dados dos filmes. Foi utilizado um arquivo.txt unicamente para melhor visualização das informações guardadas no momento da elaboração deste projeto, visto que era necessário conferir repetidamente se as operações no arquivo estavam sendo feitas corretamente. É aconselhável o uso de arquivos do tipo binário para realizar este armazenamento uma vez que são muitas informações e arquivos do tipo binário possuem maior eficiência.
